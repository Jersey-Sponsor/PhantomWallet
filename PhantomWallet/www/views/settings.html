
<h4 class="tab-title">Settings</h4>

<div class="wrapper-settings">
  <div class="settings-row">
    <div class="settings-row-icon"><i class="fas fa-cog"></i></div>
    <span class="settings-row-name">NETWORK</span>
    <div class="settings-row-item">
      <select id="selectnetwork" class="bootstrap-select" style="text-transform: capitalize;">
          {{#each networks}}
          <option value="{{Name}}" {{#if IsEnabled}} selected="selected" {{#else}} disabled {{/if}}>{{Name}}</option>
          {{/each}}
      </select>
    </div>
  </div>
  <div class="settings-row">
    <div class="settings-row-icon"><i class="fas fa-dollar-sign"></i></div>
    <span class="settings-row-name">CURRENCY</span>
    <div class="settings-row-item">
      <select id="selectcurrency" class="bootstrap-select">
          <option value="USD">USD</option>
          <option value="EUR" disabled>EUR</option>
          <option value="CAD" disabled>CAD</option>
      </select>
    </div>
  </div>
  <div class="settings-row">
    <div class="settings-row-icon"><i class="fas fa-adjust"></i></div>
    <span class="settings-row-name">DARK THEME</span>
    <div>
      <input class="tgl tgl-flat" id="cb4" type="checkbox" onclick="toggleNightMode()">
      <label class="tgl-btn" for="cb4"></label>
    </div>
  </div>
</div>
<br>
<br>
<hr style="width:50%">
<div class="wrapper-settings">
  <div class="settings-row" style="display:block;text-align:center;border:0">
    <span>Support Phantom Wallet</span><br>
    <span><a href="/send">P2f7ZFuj6NfZ76ymNMnG3xRBT5hAMicDrQRHE4S7SoxEr</a></span>
  </div>
</div>

<script>

  $.post('/config',
        {
            mode: 'get',
        },
    function (returnedData) {
      console.log(returnedData)
    }).fail(function() {
       console.log("error");
    });


  // Network Change
  $("#selectnetwork").change(function () {

       console.log('change')

   })

  // Currency Change
  $("#selectcurrency").change(function () {

        console.log('change')

  })

  // Theme Change
  const selecttheme = document.getElementById('cb4')
  selecttheme.addEventListener('change', (event) => {
    if (event.target.checked) {
      console.log('checked')
      var e = document.getElementById("selectnetwork");
      var network = e.options[e.selectedIndex].value;
      var f = document.getElementById("selectcurrency");
      var currency = f.options[f.selectedIndex].value;
      config = {network: network, currency: currency, Theme: 'dark'}
      console.log(config)
      $.post('/config',
        {
            mode: 'set',
            config: JSON.stringify(config)
        },
        function (returnedData) {
          console.log(returnedData)
        }).fail(function() {
           console.log("error");
        });
    } else {
      console.log('no checked')
      var e = document.getElementById("selectnetwork");
      var network = e.options[e.selectedIndex].value;
      var f = document.getElementById("selectcurrency");
      var currency = f.options[f.selectedIndex].value;
      config = {network: network, currency: currency, Theme: 'light'}
      console.log(config)
      $.post('/config',
        {
            mode: 'set',
            config: JSON.stringify(config)
        },
        function (returnedData) {
          console.log(returnedData)
        }).fail(function() {
           console.log("error");
        });
    }
  })

</script>
