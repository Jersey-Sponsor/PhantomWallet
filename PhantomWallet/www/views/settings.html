
<h4 class="tab-title">Settings</h4>

<div class="wrapper-settings">
  <div class="settings-row">
    <div class="settings-row-icon"><i class="fas fa-cog"></i></div>
    <span class="settings-row-name">NETWORK</span>
    <div class="settings-row-item">
      <select id="selectnetwork" class="bootstrap-select" style="text-transform: capitalize;">
          {{#each networks}}
          <option value="{{Name}}" {{#if IsEnabled}} {{#else}} disabled {{/if}}>{{Name}}</option>
          {{/each}}
      </select>
    </div>
  </div>
  <div class="settings-row">
    <div class="settings-row-icon"><i class="fas fa-dollar-sign"></i></div>
    <span class="settings-row-name">CURRENCY</span>
    <div class="settings-row-item">
      <select id="selectcurrency" class="bootstrap-select">
          <option value="USD">USD</option>
          <option value="EUR" disabled>EUR</option>
          <option value="CAD" disabled>CAD</option>
          <option value="GBP" disabled>GBP</option>
      </select>
    </div>
  </div>
  <div class="settings-row">
    <div class="settings-row-icon"><i class="fas fa-adjust"></i></div>
    <span class="settings-row-name">DARK THEME</span>
    <div>
      <input class="tgl tgl-flat" id="cb4" type="checkbox" onclick="toggleNightMode()">
      <label class="tgl-btn" for="cb4"></label>
    </div>
  </div>
</div>
<br>
<br>
<hr style="width:50%">
<div>
  <div style="text-align:center;border:0">
    <span style="display: inline-block;">Toggle Advanced Settings</span>
    <div style="display: inline-block;margin-left:2em;font-size: 1.5em;">
      <input type="checkbox">
    </div>
  </div>
</div>
<hr style="width:50%">
<div class="wrapper-settings">
  <div class="settings-row" style="display:block;text-align:center;border:0">
    <span>Support Phantom Wallet</span><br>
    <span><a href="/send">P2f7ZFuj6NfZ76ymNMnG3xRBT5hAMicDrQRHE4S7SoxEr</a></span>
  </div>
</div>

<script>

  $(document).ready(

    getSettings()

  );

  function getSettings() {

    // Update setting values on load
    $.post('/config',
          {
              mode: 'get',
          },
      function (returnedData) {
       var e = document.getElementById("selectnetwork");
       function setSelectedIndex(s, v) {
        for ( var i = 0; i < s.options.length; i++ ) {
            if ( s.options[i].text == v ) {
                s.options[i].selected = true;
                return;
            }
        }
       }
        setSelectedIndex(e,JSON.parse(returnedData).network);
      }).fail(function(e) {
         console.log(e);
      });
  }

  // Network Change
  $("#selectnetwork").change(function () {
    var e = document.getElementById("selectnetwork");
    var network = e.options[e.selectedIndex].value;
    var selecttheme = document.getElementById('cb4').checked;
    if (selecttheme = true) {
      config = {network: network, currency: 'USD', theme: 'dark'}
    } else {
      config = {network: network, currency: 'USD', theme: 'light'}
    }
    $.post('/config',
      {
          mode: 'set',
          config: JSON.stringify(config)
      },
      function (returnedData) {

      }).fail(function(e) {
         console.log(e);
      });
   })

  // Theme Change
  const selecttheme = document.getElementById('cb4');
  selecttheme.addEventListener('change', (event) => {
    if (event.target.checked) {
      var e = document.getElementById("selectnetwork");
      var network = e.options[e.selectedIndex].value;
      config = {network: network, currency: 'USD', theme: 'dark'}
      $.post('/config',
        {
            mode: 'set',
            config: JSON.stringify(config)
        },
        function (returnedData) {

        }).fail(function(e) {
           console.log(e);
        });
    } else {
      var e = document.getElementById("selectnetwork");
      var network = e.options[e.selectedIndex].value;
      config = {network: network, currency: 'USD', theme: 'light'}
      $.post('/config',
        {
            mode: 'set',
            config: JSON.stringify(config)
        },
        function (returnedData) {
          
        }).fail(function(e) {
           console.log(e);
        });
    }
  })

</script>
