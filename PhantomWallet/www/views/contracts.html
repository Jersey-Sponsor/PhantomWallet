<h3 class="tab-title">Contracts</h3>

<div class="row setup-content contracts" id="step-3">
    <div class="col-xs-12">
        <div class="col-md-12">
            <div class="form-group">
                <h4>1) Select chain</h4>
                <div class="wrapper">
                  {{#each chains}}
                    <span class="wrapper-chains button">{{Name}}</span>
                  {{/each}}
                </div>
                <h4>2) Select contract</h4>
                <select id="contractinput">
                  {{#each chains}}
                  <option value="{{Name}}">{{Name}}</option>
                  {{/each}}
                  <option value="energy">energy</option>
                </select>
                <h4>3) Enter method</h4>
                <input id="methodinput" style="width:50%;" type="text" required="required" class="form-control borderless-input shadow-box" placeholder="Enter method" />
                <h4>4) Enter parameters</h4>
                <input id="parametersinput" style="width:50%" type="text" required="required" class="form-control borderless-input shadow-box" placeholder="Enter parameters" />
            </div>
            <div class="form-group">
                <button type="button" class="button" onclick="confirmRun()">RUN</button>
                <br>
            </div>
            <div class="card-footer" style="width:50%;" ><h6>Result</h6> <pre><div id="contractresult" class="p-3 border rounded"></div></pre></div>
        </div>
    </div>
</div>

<script>
/*
function confirmRun() {

  var e = document.getElementById("contractinput");

   $.post('/contract',
       {
           contract: e.options[e.selectedIndex].value,
           method: document.getElementById("methodinput").value
       },
       function (returnedData) {
          console.log(returnedData)
          document.getElementById("contractresult").innerHTML = returnedData;
       }).fail(function(e) {
          console.log(e);
   });
}
*/
function confirmRun() {

   $.post('/contract/abi',
       {
           chain: "main",
           contract: 'energy'
       },
       function (returnedData) {
          console.log(returnedData)
          //document.getElementById("contractresult").innerHTML = returnedData;
       }).fail(function(e) {
          console.log(e);
   });
}

</script>
