<h3 class="tab-title">Transactions History</h3>
<div class="history">

  {{#if confirmedHash}}
  <div class="alert alert-success" style="overflow: auto">
      The transaction <a href="{{explorer}}/tx/{{confirmedHash}}">{{confirmedHash}}</a> was sent with <strong>success</strong>!
  </div>
  {{/if}}

  {{#if transactions}}
  <div class="table-responsive">
      <table class="table table-striped" id="mainhistorytable" style="display:none;">
          <thead>
              <tr>
                  <th class="col-1">Type</th>
                  <th class="col-2">Date (UTC)</th>
                  <th class="col-3">Hash</th>
                  <th class="col-4">Amount</th>
                  <th class="col-5">Description</th>
              </tr>
          </thead>
          <tbody>
              {{#each transactions}}
              <tr>
                  <td class="col-1">
                    {{#if Type == 'Custom'}}
                      <i class="fas fa-file-signature"><span style="display:none;">{{Type}}</span></i>
                    {{#else}}
                      {{#if Type == address}}
                      <i class="fas fa-sign-out-alt"><span style="display:none;">{{Type}}</i>
                      {{#else}}
                      <i class="fas fa-sign-in-alt"><span style="display:none;">{{Type}}</i>
                      {{/if}}
                    {{/if}}
                  </td>
                  <td class="col-2">{{#date Date}}</td>
                  <td class="col-3"><small><a href="{{explorer}}/tx/{{Hash}}" target="_blank" title="View Transaction">{{Hash}}</a></small></td>
                  <td class="col-4">{{Amount}}</td>
                  <td class="col-5">{{Description}}</td>
              </tr>
              {{/each}}
          </tbody>
      </table>
  </div>
</div>

{{#else}}
<div class="alert alert-info" role="alert">
    This address is still new and does not have any transaction yet.
</div>
{{/if}}

<script>

  $(document).ready(function() {

    initTables()

  });

  // Datatable initialization
  function initTables() {
      if (!$.fn.dataTable.isDataTable('#mainhistorytable')) {
          setTimeout(function() {
              jQuery.extend(jQuery.fn.dataTableExt.oSort, {
                  // custom ordering
                  "non-empty-string-asc": function(str1, str2) {
                      if (str1 == null || str1 == "") return 1;
                      if (str2 == null || str2 == "") return -1;
                      return ((str1 < str2) ? -1 : ((str1 > str2) ? 1 : 0))
                  },
                  "non-empty-string-desc": function(str1, str2) {
                      if (str1 == null || str1 == "") return 1;
                      if (str2 == null || str2 == "") return -1;
                      return ((str1 < str2) ? 1 : ((str1 > str2) ? -1 : 0))
                  },
                  "currency-pre": function(a) {
                      a = (a === "-") ? 0 : a.replace(/[^\d\-\.]/g, "");
                      return parseFloat(a)
                  },
                  "currency-asc": function(a, b) {
                      return a - b
                  },
                  "currency-desc": function(a, b) {
                      return b - a
                  }
              });
              $('#mainhistorytable').DataTable({
                  // adjust command and dot and replace default texts
                  "language": {
                      "decimal": ".",
                      "thousands": ",",
                      search: "<i class='fas fa-search'></i>",
                      searchPlaceholder: "Transaction",
                      zeroRecords: "No matching transaction found"
                  },
                  "bPaginate": !0,
                  "pageLength": 10,
                  "aaSorting": [],
                  // start ordering on column 1
                  "order": [1, "desc"],
                  // custom column defs
                  "columnDefs": [{
                      type: 'non-empty-string',
                      targets: [3]
                  }, {
                      type: 'currency',
                      targets: [3]
                  }, {
                    // prevent searchable on column 0
                    searchable: false,
                    targets: [0]
                  }],
                  // show datatable only after its fully initialized
                  "initComplete": function() {
                      $(this).show()
                  }
              })
          }, 100)
      }
  }

</script>
